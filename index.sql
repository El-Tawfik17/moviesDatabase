-- MySQL Script generated by MySQL Workbench
-- Thu Jun  2 10:11:31 2022
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema moviesdb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema moviesdb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `moviesdb` DEFAULT CHARACTER SET utf8 ;
USE `moviesdb` ;

-- phpMyAdmin SQL Dump
-- version 5.2.0
-- https://www.phpmyadmin.net/
--
-- Hôte : 127.0.0.1
-- Généré le : mar. 07 juin 2022 à 09:14
-- Version du serveur : 10.4.24-MariaDB
-- Version de PHP : 8.1.4

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Base de données : `moviesdb`
--

-- --------------------------------------------------------

--
-- Structure de la table `category`
--

CREATE TABLE `category` (
  `id` int(11) NOT NULL,
  `category_name` varchar(45) NOT NULL,
  `create_date` datetime NOT NULL DEFAULT current_timestamp(),
  `last_update` timestamp(6) NOT NULL DEFAULT current_timestamp(6)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Déchargement des données de la table `category`
--

INSERT INTO `category` (`id`, `category_name`, `create_date`, `last_update`) VALUES
(1, 'action', '2022-06-02 11:28:29', '0000-00-00 00:00:00.000000'),
(2, 'comedy', '2022-06-02 11:28:29', '0000-00-00 00:00:00.000000'),
(3, 'adventure', '2022-06-02 11:28:29', '0000-00-00 00:00:00.000000'),
(4, 'horror', '2022-06-02 11:28:29', '0000-00-00 00:00:00.000000'),
(5, 'drame', '2022-06-02 11:28:29', '0000-00-00 00:00:00.000000');

-- --------------------------------------------------------

--
-- Structure de la table `customers`
--

CREATE TABLE `customers` (
  `id` int(11) NOT NULL,
  `first_name` varchar(45) NOT NULL,
  `last_name` varchar(45) NOT NULL,
  `email` varchar(45) NOT NULL,
  `create_date` datetime NOT NULL DEFAULT current_timestamp(),
  `last_update` timestamp(6) NOT NULL DEFAULT current_timestamp(6)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Déchargement des données de la table `customers`
--

INSERT INTO `customers` (`id`, `first_name`, `last_name`, `email`, `create_date`, `last_update`) VALUES
(1, 'jean david', 'DOUTI', 'jd@gmail.com', '2022-06-02 13:44:56', '0000-00-00 00:00:00.000000'),
(2, 'Fadil', 'AFO', 'fadil@gmail.com', '2022-06-02 13:44:56', '0000-00-00 00:00:00.000000'),
(3, 'Tawfik', 'NADA-ABI', 'tawfik@gmail.com', '2022-06-02 13:44:56', '0000-00-00 00:00:00.000000'),
(4, 'Seth', 'SODJI', 'seth@gmail.com', '2022-06-02 13:44:56', '0000-00-00 00:00:00.000000'),
(5, 'Alex', 'FERGUSON', 'alex@gmail.com', '2022-06-02 13:46:07', '0000-00-00 00:00:00.000000');

-- --------------------------------------------------------

--
-- Structure de la table `films`
--

CREATE TABLE `films` (
  `id` int(11) NOT NULL,
  `title` varchar(45) NOT NULL,
  `out_date` varchar(45) NOT NULL,
  `duration` datetime NOT NULL,
  `realisator` varchar(45) NOT NULL,
  `create_date` datetime NOT NULL DEFAULT current_timestamp(),
  `last_update` timestamp(6) NOT NULL DEFAULT current_timestamp(6),
  `category_id` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Déchargement des données de la table `films`
--

INSERT INTO `films` (`id`, `title`, `out_date`, `duration`, `realisator`, `create_date`, `last_update`, `category_id`) VALUES
(1, 'spider-man', '2022-06-18', '2022-06-02 14:47:08', 'Tawfik SPENCER', '2022-06-02 14:13:00', '0000-00-00 00:00:00.000000', 1),
(2, 'Aquaman', '2018-01-06', '2022-06-02 14:47:08', 'Tawfik JAMES', '2022-06-02 14:13:00', '0000-00-00 00:00:00.000000', 1),
(3, 'Heropanti', '2022-03-14', '2022-06-02 14:47:08', 'Tawfik Messi', '2022-06-02 14:13:00', '0000-00-00 00:00:00.000000', 1),
(4, 'Red Notice', '2021-01-15', '2022-06-02 14:47:08', 'Tawfik Mcronald', '2022-06-02 14:13:00', '0000-00-00 00:00:00.000000', 2),
(5, 'Baby Boss', '2021-12-03', '2022-06-02 14:47:08', 'Tawfik BOSS', '2022-06-02 14:13:00', '0000-00-00 00:00:00.000000', 2),
(6, 'Senior Year', '2022-01-18', '2022-06-02 14:47:08', 'Tawfik Arnold', '2022-06-02 14:13:00', '0000-00-00 00:00:00.000000', 3),
(7, 'Dune', '2021-05-17', '2022-06-02 14:47:08', 'Tawfik DUNE', '2022-06-02 14:13:00', '0000-00-00 00:00:00.000000', 3),
(8, 'Luca', '2021-11-19', '2022-06-02 14:47:08', 'Tawfik MIKE', '2022-06-02 14:13:00', '0000-00-00 00:00:00.000000', 3),
(9, 'Alive', '2020-12-15', '2022-06-02 14:47:08', 'Tawfik ALIVE', '2022-06-02 14:13:00', '0000-00-00 00:00:00.000000', 4),
(10, 'Old', '2021-11-11', '2022-06-02 14:47:08', 'Tawfik OLD', '2022-06-02 14:13:00', '0000-00-00 00:00:00.000000', 4),
(11, 'Dni 365', '2020-11-17', '2022-06-02 14:47:08', 'Tawfik DNI', '2022-06-02 14:13:00', '0000-00-00 00:00:00.000000', 5),
(12, 'After', '2021-11-02', '2022-06-02 14:47:08', 'Tawfik COMAN', '2022-06-02 14:13:00', '0000-00-00 00:00:00.000000', 5);

-- --------------------------------------------------------

--
-- Structure de la table `payment`
--

CREATE TABLE `payment` (
  `id` int(11) NOT NULL,
  `description` varchar(45) NOT NULL,
  `payment_date` datetime NOT NULL,
  `amount` double NOT NULL,
  `rent_films_id` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Déchargement des données de la table `payment`
--

INSERT INTO `payment` (`id`, `description`, `payment_date`, `amount`, `rent_films_id`) VALUES
(1, 'tmoney', '2022-06-02 15:20:15', 18.2, 1),
(2, 'flooz', '2022-06-02 15:20:15', 10, 2),
(3, 'virement', '2022-06-02 15:20:15', 15, 3),
(4, 'virment', '2022-06-02 15:20:15', 11, 4),
(5, 'orangeMoney', '2022-06-02 15:20:15', 14, 5);

-- --------------------------------------------------------

--
-- Structure de la table `rent_films`
--

CREATE TABLE `rent_films` (
  `id` int(11) NOT NULL,
  `rented_date` datetime NOT NULL,
  `return_date` datetime NOT NULL,
  `customers_id` int(11) NOT NULL,
  `films_id` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Déchargement des données de la table `rent_films`
--

INSERT INTO `rent_films` (`id`, `rented_date`, `return_date`, `customers_id`, `films_id`) VALUES
(1, '2022-06-02 15:14:01', '2022-06-02 15:14:01', 1, 1),
(2, '2022-06-02 15:14:01', '2022-06-02 15:14:01', 2, 3),
(3, '2022-06-02 15:14:01', '2022-06-02 15:14:01', 2, 4),
(4, '2022-06-02 15:14:01', '2022-06-02 15:14:01', 3, 6),
(5, '2022-06-02 15:14:01', '2022-06-02 15:14:01', 5, 4),
(6, '2022-06-02 15:14:01', '2022-06-02 15:14:01', 4, 3);

--
-- Index pour les tables déchargées
--

--
-- Index pour la table `category`
--
ALTER TABLE `category`
  ADD PRIMARY KEY (`id`);

--
-- Index pour la table `customers`
--
ALTER TABLE `customers`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `email_UNIQUE` (`email`);

--
-- Index pour la table `films`
--
ALTER TABLE `films`
  ADD PRIMARY KEY (`id`),
  ADD KEY `fk_films_category_idx` (`category_id`);

--
-- Index pour la table `payment`
--
ALTER TABLE `payment`
  ADD PRIMARY KEY (`id`),
  ADD KEY `fk_payment_rent_films1_idx` (`rent_films_id`);

--
-- Index pour la table `rent_films`
--
ALTER TABLE `rent_films`
  ADD PRIMARY KEY (`id`),
  ADD KEY `fk_rent_films_customers1_idx` (`customers_id`),
  ADD KEY `fk_rent_films_films1_idx` (`films_id`);

--
-- AUTO_INCREMENT pour les tables déchargées
--

--
-- AUTO_INCREMENT pour la table `category`
--
ALTER TABLE `category`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=7;

--
-- AUTO_INCREMENT pour la table `customers`
--
ALTER TABLE `customers`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=6;

--
-- AUTO_INCREMENT pour la table `films`
--
ALTER TABLE `films`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=13;

--
-- AUTO_INCREMENT pour la table `payment`
--
ALTER TABLE `payment`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=6;

--
-- AUTO_INCREMENT pour la table `rent_films`
--
ALTER TABLE `rent_films`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=7;

--
-- Contraintes pour les tables déchargées
--

--
-- Contraintes pour la table `films`
--
ALTER TABLE `films`
  ADD CONSTRAINT `fk_films_category` FOREIGN KEY (`category_id`) REFERENCES `category` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;

--
-- Contraintes pour la table `payment`
--
ALTER TABLE `payment`
  ADD CONSTRAINT `fk_payment_rent_films1` FOREIGN KEY (`rent_films_id`) REFERENCES `rent_films` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;

--
-- Contraintes pour la table `rent_films`
--
ALTER TABLE `rent_films`
  ADD CONSTRAINT `fk_rent_films_customers1` FOREIGN KEY (`customers_id`) REFERENCES `customers` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  ADD CONSTRAINT `fk_rent_films_films1` FOREIGN KEY (`films_id`) REFERENCES `films` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;


--
-- Métadonnées
--
USE `phpmyadmin`;

--
-- Métadonnées pour la table category
--

--
-- Métadonnées pour la table customers
--

--
-- Métadonnées pour la table films
--

--
-- Métadonnées pour la table payment
--

--
-- Métadonnées pour la table rent_films
--

--
-- Métadonnées pour la base de données moviesdb
--
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
